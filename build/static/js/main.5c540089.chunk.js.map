{"version":3,"sources":["components/GridCircle.js","components/GridLine.js","components/GridLegend.js","components/Grid.js","components/RadarPath.js","components/RadarCircle.js","components/Radar.js","components/RadarChart.js","components/GradientLegend.js","UsOverall.js","data/stateData.js","data/readData.js","components/Map.js","components/TeleworkLegend.js","components/ScrollingSteps.js","UsByState.js","index.js"],"names":["GridCircle","gridCircleData","stateAbbr","radius","telework","map","n","assignedClassName","id","className","r","length","fill","stroke","fillOpacity","strokeWidth","labelTexts","textAnchorOptions","GridLine","mobility","rScale","angleSlice","m","i","x1","y1","x2","range","Math","cos","PI","y2","sin","textAnchor","y","t","idx","x","dy","GridLegend","axisCircleNum","reverse","Grid","region","RadarPath","data","colorScale","radarLine","lineRadial","curve","curveCardinalClosed","d","value","domain","angle","values","residential","RadarCircle","dotRadius","circleTooltipRef","useRef","handleMouseOut","current","select","attr","modifiedRScale","posXCal","posYCal","onMouseOver","cx","cy","leftCircle","type","includes","text","round","handleMouseOver","onMouseOut","ref","Radar","mobile","radarData","state","state_abbr","Region","percent_telework","residential_change_diff","forEach","push","RadarChart","transform","GradientLegend","width","height","offset","stopColor","initialMobile","window","innerWidth","initialDimensions","stateSize","MARGIN","top","right","bottom","left","UsOverall","useState","dimensions","setDimensions","setMobile","containerRef","updateDimensions","clientWidth","useEffect","addEventListener","scaleLinear","stateData","state_full","state_postal","row","column","readData","url","setData","csv","then","rawData","s","groce_pharm_change_diff","retail_recreation_change_diff","transit_change_diff","workplaces_change_diff","parks_change_diff","Map","obj","JSON","stringify","onChangeTooltipValue","statePaddingX","statePaddingY","y_row","x_column","lowerMobilityStates","selNeAndWStates","selMwAndSStates","selData","circlePosition","circleX","circleY","updatedData","join","TeleworkLegend","strokeDasharray","ScrollingSteps","direction","selectAll","classed","style","initialTooltipValue","scroller","scrollama","UsByState","scrollingTextWidth","setScrollingTextWidth","teleworkLegendMarginLeft","setTeleworkLegendMarginLeft","tooltipValue","setTooltip","hovered","setHovered","chartContainerRef","textsContainerRef","scrollingTextRef","querySelector","handleStepEnter","index","element","currentStep","$graphic","Stickyfill","add","node","$step","setup","step","nodes","onStepEnter","setupScroller","position","mobileScreenTopExampleRadarR","h","opacity","data-step","scrollyExampleRadarR","App","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.5c540089.chunk.js","sourcesContent":["import React from \"react\";\n\nconst GridCircle = ({gridCircleData, stateAbbr, radius, telework}) => {\n  return gridCircleData.map((n) => {\n    let assignedClassName;\n    if ((n === 2) && (telework >= 30)){\n      assignedClassName = \"telework\"\n    } else if (n === 1) {\n      assignedClassName = \"grid-baseline\"\n    } \n    return (\n      <g key={`${stateAbbr}-${n}`}>\n        <circle \n          id={n === 2 // only give id to the biggest circle grid\n          ? `${stateAbbr}-grid`\n          : null}\n          className={assignedClassName}\n          r={(radius / (gridCircleData.length - 1)) * n}\n          fill={n === 2 // only give fill color to the biggest circle grid\n          ? \"#CDCDCD\"\n          : \"none\"}\n          stroke=\"#fff\"\n          fillOpacity={0.2}\n          strokeWidth={stateAbbr === \"us\" // if its overall us radar chart, give thicker stroke\n          ? 4\n          : 2}/>\n      </g>\n    )\n  });\n};\n\nexport default GridCircle;\n","import React from \"react\";\n\nconst labelTexts = [[\"Retail\",\"Recreation\"], \n  [\"Grocery\",\"Pharmacy\"],\n  [\"Parks\"],\n  [\"Transit\", \"Stations\"],\n  [\"Work\",\"Places\"]]\n\nconst textAnchorOptions = [\"middle\", \"start\", \"start\", \"end\", \"end\"]\n\nconst GridLine = ({ stateAbbr, mobility, rScale, angleSlice  }) => {\n\n   return mobility.map((m,i) => (\n      <g key={`${stateAbbr}-${m}`}>\n        <line\n          x1={0}\n          y1={0}\n          x2={rScale.range()[1] * 1.1 * Math.cos(angleSlice * i - Math.PI / 2)}\n          y2={rScale.range()[1] * 1.1 * Math.sin(angleSlice * i - Math.PI / 2)}\n          stroke=\"#fff\"\n          strokeWidth={stateAbbr === \"us\" ? 4 : 2} // give overall us radar thicker stroke\n        />\n        {stateAbbr === \"AK\"  // if its alaska, give mobility labels\n          ? <text className=\"legend ak-legend\" textAnchor={textAnchorOptions[i]} y={rScale.range()[1] * 1.5 * Math.sin(angleSlice * i - Math.PI / 2)}>{labelTexts[i].map((t,idx) => <tspan x={rScale.range()[1] * 1.2 * Math.cos(angleSlice * i - Math.PI / 2)} dy={idx*11}>{t}</tspan>)}</text>\n          : null\n        }\n        {stateAbbr === \"us\" // if its overall us, give mobility labels\n          ? <text \n            className=\"legend\" \n            textAnchor={textAnchorOptions[i]} \n            y={rScale.range()[1] * 1.1 * Math.sin(angleSlice * i - Math.PI / 2)}>\n              {\n              labelTexts[i].map((t,idx) => <tspan x={rScale.range()[1] * 1.1 * Math.cos(angleSlice * i - Math.PI / 2)} dy={idx*13}>{t}</tspan>)\n              }\n            </text>\n          : null\n        }\n        {stateAbbr === \"example\" | stateAbbr === \"top-example\" // if its example radar, give mobility labels\n          ? <text className=\"legend\" textAnchor={textAnchorOptions[i]} y={rScale.range()[1] * 1.3 * Math.sin(angleSlice * i - Math.PI / 2)}>{labelTexts[i].map((t,idx) => <tspan x={rScale.range()[1] * 1.1 * Math.cos(angleSlice * i - Math.PI / 2)} dy={idx*13}>{t}</tspan>)}</text>\n          : null\n        }\n \n        \n      </g>\n    ))\n}\n\nexport default GridLine;","import React from \"react\";\n\nconst GridLegend = ({stateAbbr, gridCircleData, radius}) => {\n  return gridCircleData.map((n) => (\n    <g key={`${stateAbbr}-${n}`}>\n      {stateAbbr === \"us\" | stateAbbr === \"example\" // if its overall us radar or example radar, give percent legend\n        ? <text\n            className=\"legend\"\n            y={-(radius / (gridCircleData.length-1)) * n}\n            dy= {n === 2 ? \"1em\" : \"0.8em\"}>\n              {n === 2 && \n                `+${100*(n-1)/2}%`\n              }\n              {n === 1 &&\n               `No Change`\n              }\n              {n === 0 && \n                `${100*(n-1)/2}%`\n              }\n          </text>\n        : null \n      }\n    </g>\n  ));\n};\n\nexport default GridLegend;\n","import React from \"react\";\nimport { range } from \"d3-array\";\nimport GridCircle from \"./GridCircle\";\nimport GridLine from \"./GridLine\";\nimport GridLegend from \"./GridLegend\";\n\n// create data for grid circles\n// each radar has two grid circles\nconst axisCircleNum = 2;\nconst gridCircleData = range(0, axisCircleNum + 1).reverse();\n\nconst Grid = ({\n  stateAbbr,\n  region,\n  mobility,\n  radius,\n  rScale,\n  angleSlice,\n  telework\n}) => {\n  return (\n    <g>\n      <GridCircle \n        gridCircleData={gridCircleData} \n        stateAbbr={stateAbbr}\n        region={region}\n        radius={radius} \n        telework={telework}/>\n      <GridLine\n        stateAbbr={stateAbbr}\n        mobility={mobility}\n        rScale={rScale}\n        angleSlice={angleSlice}\n      />\n      <GridLegend\n        gridCircleData={gridCircleData} \n        stateAbbr={stateAbbr} \n        radius={radius}\n        />\n    </g>\n  );\n};\n\nexport default Grid;\n","import React from \"react\";\nimport { lineRadial, curveCardinalClosed } from \"d3-shape\";\n\nconst RadarPath = ({ data, stateAbbr, rScale, angleSlice, colorScale }) => {\n  // radial line generator, thanks to d3 woo hoo! \n  const radarLine = lineRadial()\n    .curve(curveCardinalClosed)\n    .radius((d) => {\n      // if it's over 50% or below -50%, don't go beyond the chart\n      if (d.value >= rScale.domain()[1]) {\n        return rScale.range()[1];\n      } else if (d.value <= rScale.domain()[0]) {\n        return rScale.range()[0];\n      } else {\n        return rScale(d.value);\n      }\n    })\n    .angle((d, i) => i * angleSlice);\n  return (\n      <path\n        className=\"radar-path\"\n        d={radarLine(data.values)}\n        fill={colorScale(data.residential)}\n        stroke={colorScale(data.residential)}\n        fillOpacity={.3}\n        strokeWidth={stateAbbr === \"us\" ? 3 : 1.5}\n      />\n    \n  );\n};\n\nexport default RadarPath;\n","import React, {useRef, useEffect} from \"react\";\nimport {select} from \"d3\";\n\n\nconst RadarCircle = ({ data, stateAbbr, rScale, angleSlice, colorScale }) => {\n  const dotRadius = stateAbbr === \"us\" ? 5 : 2.5;\n  const circleTooltipRef = useRef(null);\n\n  const handleMouseOver = (d, cx, cy) => {\n    if(circleTooltipRef.current){\n      const leftCircle = (d.type.includes(\"transit\")|d.type.includes(\"work\")) ? true : false;\n        select(circleTooltipRef.current)\n        .attr(\"opacity\", 1)\n        .attr(\"text-anchor\", leftCircle ? \"end\" : \"start\")\n        .attr(\"x\", leftCircle ? cx-10 : cx+10)\n        .attr(\"y\", cy)\n        .text(d.value > 0 ? `+${Math.round(100*d.value)/100}%` : `${Math.round(100*d.value)/100}%`)\n    }\n  }\n  const handleMouseOut = () => {\n    if(circleTooltipRef.current){\n        select(circleTooltipRef.current)\n        .attr(\"opacity\", 0)\n    }\n  }\n\n  return data.values.map((d, i) => {\n    const posXCal = Math.cos(angleSlice * i - Math.PI / 2);\n    const posYCal = Math.sin(angleSlice * i - Math.PI / 2);\n\n    // if it's over 50% or below -50%, don't go beyond the chart\n    let modifiedRScale;\n    if (d.value >= rScale.domain()[1]) {\n      modifiedRScale = rScale.range()[1];\n    } else if (d.value <= rScale.domain()[0]) {\n      modifiedRScale = rScale.range()[0];\n    } else {\n      modifiedRScale = rScale(d.value);\n    }\n\n    return (\n      <g key={`${d}+${i}`}>\n        <circle\n          onMouseOver={stateAbbr === \"us\" ? () => handleMouseOver(d, modifiedRScale * posXCal, modifiedRScale * posYCal) : null}\n          onMouseOut={handleMouseOut}\n          className={`radar-circle radar-circle-${d.type}`}\n          cx={modifiedRScale * posXCal}\n          cy={modifiedRScale * posYCal}\n          r={dotRadius}\n          fill={colorScale(data.residential)}\n        />\n        {stateAbbr === \"us\" && \n            <text ref={circleTooltipRef} className=\"radar-circle-legend\"></text>\n        }\n      </g>\n\n    );\n  });\n};\n\nexport default RadarCircle;\n","import React from \"react\";\nimport RadarPath from \"./RadarPath\";\nimport RadarCircle from \"./RadarCircle\";\n\nconst Radar = ({\n  data,\n  stateAbbr,\n  mobility,\n  rScale,\n  angleSlice,\n  colorScale,\n  mobile\n}) => {\n  // prepare data for radar chart\n  const radarData = {\n    state: data.state,\n    state_abbr: data[\"State Code\"],\n    region: data.Region,\n    percent_telework: data.percent_telework,\n    residential: data.residential_change_diff,\n    values: []\n  };\n  mobility.forEach((m, i) => {\n    radarData.values.push({\n      type: m,\n      value: data[m]\n    });\n  });\n  \n  return (\n    <g>\n      <RadarPath\n        data={radarData}\n        stateAbbr={stateAbbr}\n        rScale={rScale}\n        angleSlice={angleSlice}\n        colorScale={colorScale}\n      />\n      <RadarCircle\n        data={radarData}\n        stateAbbr={stateAbbr}\n        rScale={rScale}\n        angleSlice={angleSlice}\n        colorScale={colorScale}\n      />\n      { stateAbbr !== \"us\" // if its us radar chart, don't put state label in the middle \n        ? <text \n            dy={mobile && stateAbbr !== \"AK\" ? -rScale.range()[1] : 0}\n            className=\"state-abbr\">\n            {stateAbbr}\n          </text>\n        : null\n      }\n    </g>\n  );\n};\n\nexport default Radar;\n","import React from \"react\";\nimport Grid from \"./Grid\";\nimport Radar from \"./Radar\";\n\nconst RadarChart = ({\n  data,\n  stateAbbr,\n  region,\n  mobility,\n  radius,\n  rScale,\n  angleSlice,\n  colorScale,\n  mobile\n}) => {\n\n  return (\n    <g transform={stateAbbr===\"us\" ? `translate(0, ${25})` : `translate(0)`}>\n      <Grid\n        stateAbbr={stateAbbr}\n        region={region}\n        mobility={mobility}\n        radius={radius}\n        rScale={rScale}\n        angleSlice={angleSlice}\n        telework={data.percent_telework}/>\n      <Radar\n        data={data}\n        stateAbbr={stateAbbr}\n        mobility={mobility}\n        rScale={rScale}\n        angleSlice={angleSlice}\n        colorScale={colorScale}\n        mobile={mobile}\n        />\n    </g>\n  )\n}\n\nexport default RadarChart;","import \"../styles.css\";\nimport React from \"react\";\n\nconst GradientLegend = ({colorScale, x, y, width, height}) => {\n    return (\n      <g className=\"gradient-legend\">\n        <defs>\n          <linearGradient id=\"linear-gradient\">\n            <stop offset=\"0%\" stopColor={colorScale.range()[0]}></stop>\n            <stop offset=\"100%\" stopColor={colorScale.range()[1]}></stop>\n          </linearGradient>\n        </defs>\n        <text className=\"legend-title\" x={x+width/2} y={y - 5}>Time Spent At Home</text>\n        <rect x={x} y={y} width={width} height={height} fill=\"url(#linear-gradient)\"/>\n        <text x={x} y={y+height*1.8}>{`No Change`}</text>\n        <text x={x+width} y={y+height*1.8} textAnchor=\"end\">{`+${colorScale.domain()[1]}%`}</text>\n      </g>\n    )\n  }\n\n  export default GradientLegend","import \"./styles.css\";\nimport React, {useRef, useEffect, useState} from \"react\";\nimport {scaleLinear} from \"d3-scale\";\nimport RadarChart from \"./components/RadarChart\";\nimport GradientLegend from \"./components/GradientLegend\";\n\n// define chart dimensions\nconst initialMobile = window.innerWidth <= 768\n  ? true\n  : false;\n\nconst initialDimensions = {\n  height: 0,\n  width: 0,\n  stateSize: 0,\n  MARGIN: {\n    top: 100,\n    right: initialMobile\n      ? 20\n      : 50,\n    bottom: initialMobile\n      ? 20\n      : 10,\n    left: initialMobile\n      ? 20\n      : 60\n  }\n};\n\nlet data = {\n  \"retail_recreation_change_diff\": 2.7419354838709675,\n  \"groce_pharm_change_diff\": 3.532258064516129,\n  \"parks_change_diff\": 32.6612903225807,\n  \"transit_change_diff\": -0.03225806451612903,\n  \"workplaces_change_diff\": -15.387096774193548,\n  \"residential_change_diff\": 3.25806451612903\n}\n\n\n\nconst UsOverall = ({colorScale, mobility}) => {\n  const angleSlice = (Math.PI * 2) / mobility.length;\n\n  const [dimensions,\n    setDimensions] = useState(initialDimensions);\n  const [mobile,\n    setMobile] = useState(initialMobile);\n\n  const containerRef = useRef(null);\n\n  function updateDimensions() {\n    if (containerRef.current) {\n      setMobile(window.innerWidth <= 768\n        ? true\n        : false)\n      const width = containerRef.current.clientWidth,\n        MARGIN = {\n          top: 100,\n          right: mobile\n            ? 20\n            : 50,\n          bottom: mobile\n            ? 20\n            : 0,\n          left: mobile\n            ? 20\n            : 60\n        },\n        stateSize = 0,\n        height = 1.1 * width / 2 + MARGIN.top + MARGIN.bottom;\n      setDimensions({height, width, stateSize, MARGIN});\n    }\n  }\n\n  useEffect(() => {\n    updateDimensions()\n    window.addEventListener(\"resize\", updateDimensions)\n  }, [containerRef]);\n\n  const radius = dimensions.width / 4;\n  const rScale = scaleLinear()\n    .domain([-50, 50])\n    .range([0, radius]);\n\n  return (\n    <section ref={containerRef} id=\"us-overall\" className=\"mobility-chart\">\n      <h3>The New Normalcy</h3>\n      <p className=\"chart-subtitle\">US average mobility between April 7 and May 7, 2021</p>\n      <svg width={dimensions.width} height={dimensions.height}>\n        <g\n          className=\"chart\"\n          transform={`translate(${dimensions.width / 2}, ${ (dimensions.height+20) / 2})`}>\n          <GradientLegend\n            colorScale={colorScale}\n            x={mobile ? - dimensions.width / 6 : - dimensions.width / 8}\n            y={ -(radius + dimensions.MARGIN.top / 2)}\n            width={mobile ?  dimensions.width / 3 : dimensions.width / 4}\n            height={20}/>\n          <RadarChart\n            data={data}\n            stateAbbr=\"us\"\n            radius={radius}\n            mobility={mobility}\n            rScale={rScale}\n            angleSlice={angleSlice}\n            colorScale={colorScale}\n            telework={data.percent_telework}/>\n        </g>\n      </svg>\n      <div className=\"chart-notes\">\n      <p className=\"source\">Data Source: Google Mobility Reports</p>\n        <p>The baseline represents average mobility trends seen in January and February 2020. </p>\n      </div>\n    </section>\n  )\n}\n\nexport default UsOverall;","const stateData = [\n  {\n    state_full: 'Example',\n    state_postal: 'State',\n    row: -1,\n    column: 5\n  },\n  {\n    state_full: 'Alabama',\n    state_postal: 'AL',\n    row: 5,\n    column: 6\n  },\n  {\n    state_full: 'Alaska',\n    state_postal: 'AK',\n    row: -1,\n    column: 0\n  },\n  {\n    state_full: 'Arizona',\n    state_postal: 'AZ',\n    row: 4,\n    column: 1\n  },\n  {\n    state_full: 'Arkansas',\n    state_postal: 'AR',\n    row: 4,\n    column: 4\n  },\n  {\n    state_full: 'California',\n    state_postal: 'CA',\n    row: 3,\n    column: 0\n  },\n  {\n    state_full: 'Colorado',\n    state_postal: 'CO',\n    row: 3,\n    column: 2\n  },\n  {\n    state_full: 'Connecticut',\n    state_postal: 'CT',\n    row: 2,\n    column: 9\n  },\n  {\n    state_full: 'District of Columbia',\n    state_postal: 'DC',\n    row: 4,\n    column: 8\n  },\n  {\n    state_full: 'Delaware',\n    state_postal: 'DE',\n    row: 3,\n    column: 9\n  },\n  {\n    state_full: 'Florida',\n    state_postal: 'FL',\n    row: 6,\n    column: 8\n  },\n  {\n    state_full: 'Georgia',\n    state_postal: 'GA',\n    row: 5,\n    column: 7\n  },\n  {\n    state_full: 'Hawaii',\n    state_postal: 'HI',\n    row: 6,\n    column: 0\n  },\n  {\n    state_full: 'Idaho',\n    state_postal: 'ID',\n    row: 1,\n    column: 1\n  },\n  {\n    state_full: 'Illinois',\n    state_postal: 'IL',\n    row: 1,\n    column: 6\n  },\n  {\n    state_full: 'Indiana',\n    state_postal: 'IN',\n    row: 2,\n    column: 5\n  },\n  {\n    state_full: 'Iowa',\n    state_postal: 'IA',\n    row: 2,\n    column: 4\n  },\n  {\n    state_full: 'Kansas',\n    state_postal: 'KS',\n    row: 4,\n    column: 3\n  },\n  {\n    state_full: 'Kentucky',\n    state_postal: 'KY',\n    row: 3,\n    column: 5\n  },\n  {\n    state_full: 'Louisiana',\n    state_postal: 'LA',\n    row: 5,\n    column: 4\n  },\n  {\n    state_full: 'Maine',\n    state_postal: 'ME',\n    row: -1,\n    column: 10\n  },\n  {\n    state_full: 'Maryland',\n    state_postal: 'MD',\n    row: 3,\n    column: 8\n  },\n  {\n    state_full: 'Massachusetts',\n    state_postal: 'MA',\n    row: 1,\n    column: 9\n  },\n  {\n    state_full: 'Michigan',\n    state_postal: 'MI',\n    row: 1,\n    column: 7\n  },\n  {\n    state_full: 'Minnesota',\n    state_postal: 'MN',\n    row: 1,\n    column: 4\n  },\n  {\n    state_full: 'Mississippi',\n    state_postal: 'MS',\n    row: 5,\n    column: 5\n  },\n  {\n    state_full: 'Missouri',\n    state_postal: 'MO',\n    row: 3,\n    column: 4\n  },\n  {\n    state_full: 'Montana',\n    state_postal: 'MT',\n    row: 1,\n    column: 2\n  },\n  {\n    state_full: 'Nebraska',\n    state_postal: 'NE',\n    row: 3,\n    column: 3\n  },\n  {\n    state_full: 'Nevada',\n    state_postal: 'NV',\n    row: 2,\n    column: 1\n  },\n  {\n    state_full: 'New Hampshire',\n    state_postal: 'NH',\n    row: 0,\n    column: 10\n  },\n  {\n    state_full: 'New Jersey',\n    state_postal: 'NJ',\n    row: 2,\n    column: 8\n  },\n  {\n    state_full: 'New Mexico',\n    state_postal: 'NM',\n    row: 4,\n    column: 2\n  },\n  {\n    state_full: 'New York',\n    state_postal: 'NY',\n    row: 1,\n    column: 8\n  },\n  {\n    state_full: 'North Carolina',\n    state_postal: 'NC',\n    row: 4,\n    column: 6\n  },\n  {\n    state_full: 'North Dakota',\n    state_postal: 'ND',\n    row: 1,\n    column: 3\n  },\n  {\n    state_full: 'Ohio',\n    state_postal: 'OH',\n    row: 2,\n    column: 6\n  },\n  {\n    state_full: 'Oklahoma',\n    state_postal: 'OK',\n    row: 5,\n    column: 3\n  },\n  {\n    state_full: 'Oregon',\n    state_postal: 'OR',\n    row: 2,\n    column: 0\n  },\n  {\n    state_full: 'Pennsylvania',\n    state_postal: 'PA',\n    row: 2,\n    column: 7\n  },\n  {\n    state_full: 'Rhode Island',\n    state_postal: 'RI',\n    row: 2,\n    column: 10\n  },\n  {\n    state_full: 'South Carolina',\n    state_postal: 'SC',\n    row: 4,\n    column: 7\n  },\n  {\n    state_full: 'South Dakota',\n    state_postal: 'SD',\n    row: 2,\n    column: 3\n  },\n  {\n    state_full: 'Tennessee',\n    state_postal: 'TN',\n    row: 4,\n    column: 5\n  },\n  {\n    state_full: 'Texas',\n    state_postal: 'TX',\n    row: 6,\n    column: 3\n  },\n  {\n    state_full: 'Utah',\n    state_postal: 'UT',\n    row: 3,\n    column: 1\n  },\n  {\n    state_full: 'Vermont',\n    state_postal: 'VT',\n    row: 0,\n    column: 9\n  },\n  {\n    state_full: 'Virginia',\n    state_postal: 'VA',\n    row: 3,\n    column: 7\n  },\n  {\n    state_full: 'Washington',\n    state_postal: 'WA',\n    row: 1,\n    column: 0\n  },\n  {\n    state_full: 'West Virginia',\n    state_postal: 'WV',\n    row: 3,\n    column: 6\n  },\n  {\n    state_full: 'Wisconsin',\n    state_postal: 'WI',\n    row: 1,\n    column: 5\n  },\n  {\n    state_full: 'Wyoming',\n    state_postal: 'WY',\n    row: 2,\n    column: 2\n  }\n]\nexport default stateData;\n","import { useState, useEffect } from \"react\";\nimport { csv } from \"d3\";\nimport stateData from \"./stateData.js\";\n\nconst readData = (url) => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    csv(url).then(rawData => {\n      rawData.forEach((d) => {\n        stateData.forEach((s) => {\n          if (d.state == s.state_full) {\n            d.row = +s.row;\n            d.column = s.column;\n            d.groce_pharm_change_diff = +d.groce_pharm_change_diff;\n            d.retail_recreation_change_diff = +d.retail_recreation_change_diff;\n            d.transit_change_diff = +d.transit_change_diff;\n            d.workplaces_change_diff = +d.workplaces_change_diff;\n            d.parks_change_diff = +d.parks_change_diff;\n            d.residential_change_diff = +d.residential_change_diff;\n            d.percent_telework = +d.percent_telework;\n            // d.avg_aggr_mobility = (d.groce_pharm_change_diff+\n            //   d.retail_recreation_change_diff+\n            //   d.transit_change_diff+\n            //   d.workplaces_change_diff)/4\n          } \n        });\n      });\n      // drop duplicates\n      setData([...new Map(rawData.map(obj => [JSON.stringify(obj), obj])).values()])\n    });\n  }, []);\n  return data;\n};\n\nexport default readData;\n","import React from \"react\";\nimport {scaleLinear} from \"d3\";\nimport readData from \"../data/readData.js\";\nimport RadarChart from \"./RadarChart\";\n\n// mobility data url\nconst csvUrl = \"https://gist.githubusercontent.com/sabrinamochi/6b1a8d203618ed230c7254bf8c53dfd2\" +\n    \"/raw/cd80388fa3b33d48a8e324331bbcb83531c883c8/clean-avg-mobility-data.csv\";\n\nconst Map = ({onChangeTooltipValue, stateSize, mobility, colorScale, mobile}) => {\n  // load data\n  const data = readData(csvUrl);\n  if (!data) {\n    return <pre>Loading...</pre>;\n  } \n  // define padding\n  const statePaddingX = mobile\n    ? 3\n    : 5;\n  const statePaddingY = mobile\n    ? 12\n    : 5;\n\n  // function to calculate state location\n  const y_row = ({row}) => row * (stateSize + statePaddingY);\n  const x_column = ({column}) => column * (stateSize + statePaddingX);\n\n  const angleSlice = (Math.PI * 2) / mobility.length;\n\n  const radius = stateSize / 2;\n  const rScale = scaleLinear()\n    .domain([-50, 50])\n    .range([0, radius]);\n\n  const lowerMobilityStates = [\n    \"MA\",\n    \"VT\",\n    \"MD\",\n    \"NJ\",\n    \"HI\",\n    \"DC\",\n    \"RI\",\n    \"CT\"\n  ];\n\n  const selNeAndWStates = [\n    \"VT\",\n    \"NH\",\n    \"MA\",\n    \"NY\",\n    \"NJ\",\n    \"CT\",\n    \"RI\",\n    \"HI\",\n    \"CA\",\n    \"CO\",\n    \"NM\",\n  ];\n\n  const selMwAndSStates = [\n    \"WI\",\"IL\",\"SD\",\"IA\",\"IN\",\"OH\",\n    \"NE\",\"MO\",\"KY\",\"KS\",\"AR\",\"TN\",\"NC\",\"SC\",\n    \"OK\",\"MS\",\"AL\",\"GA\",\"TX\"\n  ];\n\n  const handleMouseOver = (selData) => {\n    const circlePosition = {\n      circleX:x_column(selData) + stateSize * 2.2,\n      circleY: y_row(selData) + stateSize / 2\n    }\n    const updatedData = {\n      ...selData,\n      ...circlePosition\n    }\n    onChangeTooltipValue(updatedData, true)\n  }\n\n  const handleMouseOut = () => {\n    onChangeTooltipValue({\n      value: \"\"\n    }, false)\n  }\n\n  return data.map((d, i) => {\n    const assignedClassName = [\"radar\"];\n    if (selNeAndWStates.includes(d[\"State Code\"])) {\n      assignedClassName.push(\"ne-w\");\n    } else if (selMwAndSStates.includes(d[\"State Code\"])) {\n      assignedClassName.push(\"mw-s\");\n    }\n    if (lowerMobilityStates.includes(d[\"State Code\"])) {\n      assignedClassName.push(\"low-overall-mobility\")\n    }\n    return (\n      <g\n        onMouseOver={() => handleMouseOver(d)}\n        onMouseOut={handleMouseOut}\n        className={assignedClassName.join(\" \")}\n        key={`${d.state}-${i}`}\n        transform={`translate(${x_column(d) + stateSize / 2}, ${y_row(d) + stateSize / 2})`}>\n        <RadarChart\n          data={d}\n          stateAbbr={d[\"State Code\"]}\n          region={d.Region}\n          mobility={mobility}\n          radius={radius}\n          rScale={rScale}\n          angleSlice={angleSlice}\n          colorScale={colorScale}\n          mobile={mobile}/>\n      </g>\n    )\n  });\n};\n\nexport default Map;\n","import \"../styles.css\";\nimport React from \"react\";\n\nconst TeleworkLegend = ({ width, transform, mobile }) => {\n    return (\n      <g \n        className=\"telework-legend\"\n        transform={transform}>\n        <text \n          className=\"legend-title\"\n          transform={`translate(${width/2}, ${-20})`}\n        >\n            <tspan>More ppl.</tspan>\n            <tspan y={12} x={0}>Teleworking</tspan>\n        </text>\n        <line \n          x1={0}\n          x2={width}\n          strokeDasharray={mobile ? null : \"25 1.5\"}/>\n      </g>\n    )\n  }\n\n  export default TeleworkLegend;","import \"../styles.css\";\nimport {select, selectAll} from \"d3\";\n\nconst ScrollingSteps = {\n  \"explain\": (direction) => {\n    if (direction == \"down\") {\n      selectAll(\".radar-path\").classed(\"show\", true)\n      selectAll(\".radar-circle\").classed(\"show\", true)\n    } else {\n      selectAll(\".radar-path\").classed(\"show\", false)\n      selectAll(\".radar-circle\").classed(\"show\", false)\n    }\n  },\n  \"park\": (direction) => {\n    if (direction == \"down\") {\n      selectAll(\".radar-path\").classed(\"show\", false)\n      selectAll(\".radar-circle\").classed(\"show\", false)\n      selectAll(\".radar-circle-parks_change_diff\").classed(\"show\", true)\n      selectAll(\".ak-legend\").classed(\"show\", true)\n    } else {\n      selectAll(\".radar-path\").classed(\"show\", true)\n      selectAll(\".radar-circle\").classed(\"show\", true)\n    }\n  },\n  \"east\": (direction) => {\n    if (direction == \"down\") {\n      selectAll(\".radar-circle-parks_change_diff\").classed(\"show\", false)\n      selectAll(\".low-overall-mobility path, .low-overall-mobility circle\")\n        .classed(\"show\", true)\n    } else {\n      selectAll(\".low-overall-mobility path, .low-overall-mobility circle\")\n        .classed(\"show\", false)\n      selectAll(\".radar-circle-parks_change_diff\").classed(\"show\", true)\n    }\n  },\n  \"ne-w\": (direction) => {\n    if (direction == \"down\") {\n      selectAll(\".low-overall-mobility path, .low-overall-mobility circle\")\n        .classed(\"show\", false)\n      selectAll(\".ne-w path, .ne-w circle\")\n        .classed(\"show\", true)\n    } else {\n      selectAll(\".ne-w path, .ne-w circle\")\n        .classed(\"show\", false)\n      selectAll(\".low-overall-mobility path, .low-overall-mobility circle\")\n        .classed(\"show\", true)\n    }\n  },\n  \"mw-s\": (direction) => {\n    if (direction == \"down\") {\n      selectAll(\".ne-w path, .ne-w circle\")\n        .classed(\"show\", false)\n      selectAll(\".mw-s path, .mw-s circle\")\n        .classed(\"show\", true)\n    } else {\n      selectAll(\".mw-s path, .mw-s circle\")\n        .classed(\"show\", false)\n      selectAll(\".ne-w path, .ne-w circle\")\n        .classed(\"show\", true)\n    }\n  },\n  \"telework\": (direction) => {\n    if (direction == \"down\") {\n      selectAll(\".radar-path\").classed(\"show\", true)\n      selectAll(\".radar-circle\").classed(\"show\", true)\n      select(\".telework-legend\").style(\"opacity\", 1)\n      selectAll(\".telework\").classed(\"selected-grid\", true)\n    } else {\n      selectAll(\".radar-path\").classed(\"show\", false)\n      selectAll(\".radar-circle\").classed(\"show\", false)\n      select(\".telework-legend\").style(\"opacity\", 0)\n      selectAll(\".telework\").classed(\"selected-grid\", false)\n      selectAll(\".mw-s path, .mw-s circle\")\n        .classed(\"show\", true)\n    }\n  },\n  \"explore\": (direction) => {\n    return;\n  },\n  \"invisible\": (direction) => {\n    if (direction == \"down\") {\n      selectAll(\".mobility-chart\").style(\"z-index\", 1)\n    } else {\n      selectAll(\".mobility-chart\").style(\"z-index\", -1)\n    }\n  }\n}\n\nexport default ScrollingSteps;","import \"./styles.css\";\nimport React, {useRef, useEffect, useState} from \"react\";\nimport scrollama from \"scrollama\";\nimport Stickyfill from 'stickyfilljs';\nimport {selectAll, select, scaleLinear} from \"d3\";\nimport Map from \"./components/Map\";\nimport Grid from \"./components/Grid\";\nimport GradientLegend from \"./components/GradientLegend\";\nimport TeleworkLegend from \"./components/TeleworkLegend\";\nimport ScrollingSteps from \"./components/ScrollingSteps\";\n\n// define chart dimensions\nconst initialMobile = window.innerWidth <= 768\n  ? true\n  : false;\n\nconst initialDimensions = {\n  height: 0,\n  width: 0,\n  stateSize: 0,\n  MARGIN: {\n    top: initialMobile\n      ? 60\n      : 100,\n    right: initialMobile\n      ? 20\n      : 120,\n    bottom: initialMobile\n      ? 40\n      : 35,\n    left: initialMobile\n      ? 20\n      : 120\n  }\n};\n\n// set up tooltip\nconst initialTooltipValue = {\n  value: \"\"\n}\nconst scrollyExampleRadarR = 80, mobileScreenTopExampleRadarR = 30;\n\n// initiate scroller\nconst scroller = scrollama();\n\nconst UsByState = ({colorScale, mobility}) => {\n  const [dimensions,\n    setDimensions] = useState(initialDimensions);\n  const [mobile,\n    setMobile] = useState(initialMobile);\n  const [scrollingTextWidth,\n    setScrollingTextWidth] = useState(0)\n  const [teleworkLegendMarginLeft,\n    setTeleworkLegendMarginLeft] = useState(35)\n  const [tooltipValue,\n    setTooltip] = useState(initialTooltipValue);\n  const [hovered,\n    setHovered] = useState(false);\n\n  // update dimensions and provide nodes to scroller after chart and scrolling\n  // texts containers are rendered\n  const chartContainerRef = useRef(null);\n  const textsContainerRef = useRef(null);\n  const scrollingTextRef = useRef(null);\n\n  function updateDimensions() {\n    if (chartContainerRef.current) {\n      setMobile(window.innerWidth <= 768\n        ? true\n        : false)\n      const width = chartContainerRef.current.clientWidth,\n        MARGIN = {\n          top: mobile\n            ? 60\n            : 100,\n          right: mobile\n            ? 20\n            : 120,\n          bottom: mobile\n            ? 40\n            : 35,\n          left: mobile\n            ? 20\n            : 120\n        },\n        stateSize = (width - MARGIN.left - MARGIN.right) / 12,\n        height = mobile\n          ? stateSize * 8.5 + MARGIN.top + MARGIN.bottom\n          : stateSize * 7.5 + MARGIN.top + MARGIN.bottom;\n      setDimensions({height, width, stateSize, MARGIN});\n      setScrollingTextWidth(scrollingTextRef.current.querySelector(\"p\").clientWidth)\n      setTeleworkLegendMarginLeft(mobile ? 40 : 35)\n    }\n  }\n  useEffect(() => {\n    updateDimensions()\n    window.addEventListener(\"resize\", updateDimensions)\n  }, [chartContainerRef, textsContainerRef, scrollingTextRef]);\n\n  // console.log(mobile) Scrollytelling\n  function handleStepEnter({index, element, direction}) {\n    currentStep = select(element).attr('data-step')\n    ScrollingSteps[currentStep](direction);\n  }\n\n  function setupScroller() {\n    if (chartContainerRef.current) {\n      const $graphic = select(\".mobility-chart\")\n      Stickyfill.add($graphic.node());\n    }\n    if (textsContainerRef.current) {\n      const $step = selectAll(\".scrolling-text\")\n      scroller.setup({\n        step: $step.nodes(),\n        offset: 0.8\n      }).onStepEnter(handleStepEnter)\n    }\n  }\n  let currentStep = '';\n  setupScroller()\n\n  // update tooltip value if user hovers on radar\n  const onChangeTooltipHandler = (t, h) => {\n    setTooltip(t);\n    setHovered(h)\n    // console.log(tooltipValue)\n  };\n  // console.log(mobile, dimensions.width, dimensions.stateSize)\n  return (\n    <section id=\"scrolling-map\">\n      <div ref={chartContainerRef} className=\"mobility-chart\">\n        <h3>Mobility Patterns by State</h3>\n        <p className=\"chart-subtitle\"></p>\n        <div style={{\n          position: \"relative\"\n        }}>\n          <div id=\"mobile-radar-legend\">\n            <svg width={dimensions.width} height={mobileScreenTopExampleRadarR * 3}>\n              <g\n                transform={`translate(${dimensions.width / 2}, ${mobileScreenTopExampleRadarR  + mobileScreenTopExampleRadarR  * 0.6})`}>\n                <Grid\n                  stateAbbr={\"top-example\"}\n                  region={null}\n                  mobility={mobility}\n                  radius={mobileScreenTopExampleRadarR }\n                  rScale={scaleLinear()\n                  .domain([-50, 50])\n                  .range([0, mobileScreenTopExampleRadarR ])}\n                  angleSlice={(Math.PI * 2) / mobility.length}\n                  telework={0}/>\n              </g>\n            </svg>\n          </div>\n          <svg width={dimensions.width} height={dimensions.height}>\n            <g\n              className=\"chart\"\n              transform={`translate(${dimensions.MARGIN.left}, ${dimensions.MARGIN.top})`}>\n              <GradientLegend\n                colorScale={colorScale}\n                x={mobile\n                ? dimensions.width / 2 - dimensions.MARGIN.left - dimensions.width / 6\n                : dimensions.width / 2 - dimensions.MARGIN.left - dimensions.width / 8}\n                y={- dimensions.MARGIN.top / 2}\n                width={mobile\n                ? dimensions.width / 3\n                : dimensions.width / 4}\n                height={20}/>\n              <TeleworkLegend\n                transform={`translate(${teleworkLegendMarginLeft + dimensions.width / 2 - dimensions.MARGIN.left + dimensions.width / 8}, ${ 10 - dimensions.MARGIN.top / 2})`}\n                width={mobile\n                ? 30\n                : 60}\n                mobile={mobile}/>\n              <Map\n                onChangeTooltipValue={onChangeTooltipHandler}\n                stateSize={dimensions.stateSize}\n                mobility={mobility}\n                colorScale={colorScale}\n                mobile={mobile}/>\n            </g>\n          </svg>\n          <div className=\"chart-notes\">\n            <p className=\"source\">Data Source: Google Mobility Reports, Household Pulse Survey</p>\n            <p>The baseline represents average mobility trends seen in January and February\n              2020.\n            </p>\n            <p>Definition of states with more people teleworking: Over 30% of adults living\n              in households where at least one adult worked remotely between April 14 and\n              April 26, 2021.</p>\n          </div>\n          <div\n            className=\"tooltip\"\n            style={{\n            left: mobile\n              ? 0\n              : `${tooltipValue.circleX}px`,\n            top: mobile\n              ? 0\n              : `${tooltipValue.circleY}px`,\n            opacity: hovered\n              ? 1\n              : 0\n          }}>\n            <h5>{tooltipValue.state}</h5>\n            <div>\n              <p>retail<br></br>recreation</p>\n              <p>{`${Math.round(10 * tooltipValue.retail_recreation_change_diff) / 10}%`}</p>\n            </div>\n            <div>\n              <p>grocery<br></br>pharmacy</p>\n              <p>{`${Math.round(10 * tooltipValue.groce_pharm_change_diff) / 10}%`}</p>\n            </div>\n            <div>\n              <p>transit<br></br>stations</p>\n              <p>{`${Math.round(10 * tooltipValue.transit_change_diff) / 10}%`}</p>\n            </div>\n            <div>\n              <p>work<br></br>places</p>\n              <p>{`${Math.round(10 * tooltipValue.workplaces_change_diff) / 10}%`}</p>\n            </div>\n            <div>\n              <p>parks</p>\n              <p>{`${Math.round(10 * tooltipValue.parks_change_diff) / 10}%`}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div ref={textsContainerRef} className=\"scrolling-texts-container\">\n        <div ref={scrollingTextRef} className=\"scrolling-text\" data-step=\"explain\">\n          <p>\n            <span className=\"tutorial\">How to read:</span> the further the dot is away from the center, the more people visiting the\n            location compared to the pre-pandemic period, and vice versa.</p>\n          <div>\n            <svg width={scrollingTextWidth} height={scrollyExampleRadarR * 3}>\n              <g\n                transform={`translate(${scrollingTextWidth / 2}, ${scrollyExampleRadarR + scrollyExampleRadarR * 0.6})`}>\n                <Grid\n                  stateAbbr={\"example\"}\n                  region={null}\n                  mobility={mobility}\n                  radius={scrollyExampleRadarR}\n                  rScale={scaleLinear()\n                  .domain([-50, 50])\n                  .range([0, scrollyExampleRadarR])}\n                  angleSlice={(Math.PI * 2) / mobility.length}\n                  telework={0}/>\n              </g>\n            </svg>\n          </div>\n        </div>\n        <div className=\"scrolling-text\" data-step=\"park\">\n          <p>For example, visits to parks are way above the baseline in almost all states\n            except for D.C. and Hawaii.</p>\n        </div>\n        <div className=\"scrolling-text\" data-step=\"east\">\n          <p>Most areas in the eastern U.S. still see people spending more time at home,\n            with D.C. having the most significant increase, more than 10% above the\n            baseline.</p>\n        </div>\n        <div className=\"scrolling-text\" data-step=\"ne-w\">\n          <p>In nearly half of the states in northeast and west regions, where many\n            office-based employees can work remotely, mobility trends in indoor commercial\n            places, such as shops and train stations, are still below baseline levels.</p>\n        </div>\n        <div className=\"scrolling-text\" data-step=\"mw-s\">\n          <p>About two-thirds of the states in the midwest and south regions see\n            commercial activities heating up. Visits to supermarkets, cafes and transit\n            stations reach the baseline. The duration of people staying at home is almost\n            the same as what it was before the pandemic.</p>\n        </div>\n        <div className=\"scrolling-text\" data-step=\"telework\">\n          <p>The percentage of people working remotely highly correlates with the changes\n            in mobility patterns. States with more people reporting being able to telework\n            also spend more time at home.</p>\n        </div>\n        <div className=\"scrolling-text\" data-step=\"explore\">\n          <p>Hover over each state to see the detailed mobility trends.</p>\n        </div>\n        <div className=\"scrolling-text\" data-step=\"invisible\">\n          <p></p>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nexport default UsByState\n","import \"./styles.css\";\nimport React, { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { scaleLinear } from \"d3-scale\";\nimport UsOverall from \"./UsOverall\";\nimport UsByState from \"./UsByState\";\n\n\nconst colorScale = scaleLinear()\n    .domain([0,10])\n    .range([\"#ee694b\", \"#38bfcd\"]);\n  \nconst mobility = [\n\"retail_recreation_change_diff\",\n\"groce_pharm_change_diff\",\n\"parks_change_diff\",\n\"transit_change_diff\",\n\"workplaces_change_diff\"\n]\n\nconst App = () => {\n  return (\n    <main>\n      <section className=\"content\">\n        <h1>Where People Are Moving Again</h1>\n        <p className=\"byline\">By Szu Yu Chen</p>\n        <div>\n          <p>City streets are getting crowded. Travel plans are ramping up. Restaurants are allowing people to dine in again.</p>\n          <br></br>\n          <p>After vaccine rollout began last December and restrictions on social distancing have eased, America is on track to return to normalcy.</p>\n          <br></br>\n          <p>Google COVID-19 Community Mobility Reports show how visits and length of stay in different locations have changed compared to a baseline period before the pandemic. </p>\n        </div>\n      </section>\n      <UsOverall colorScale={colorScale} mobility={mobility}/>\n      <section className=\"content\">\n        <div>\n          <p>Across the U.S., movement of people to shopping centers, grocery stores and train stations is almost the same as what it was during the pre-pandemic days.</p>\n          <br></br>\n          <p>However, visits to workplaces are still down by 15% as compared to the baseline.</p>\n          <br></br>\n          <p>A further inspection of the state-level data reveals that while visits to workplaces remain below the baseline in all states, mobility trends in other locations vary across the country.</p>\n        </div>\n      </section>\n      <UsByState colorScale={colorScale} mobility={mobility}/>\n    </main>\n  )\n};\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}